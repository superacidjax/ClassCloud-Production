%h1 All discussions

%table
  %tr
    %th Title
    %th Description
    %th
    %th
    %th

  - @discussions.each do |discussion|
    %tr
      %td= discussion.title
      %td= discussion.description
      - if current_user.id.eql?(discussion.user_id) 
        %td= link_to 'Edit', edit_class_room_discussion_path(@class.id, discussion)
      - if current_user.id.eql?(discussion.user_id) or current_user.is_teacher?
        %td= link_to 'Destroy', class_room_discussion_path(@class.id, discussion), :confirm => 'Are you sure?', :method => :delete
      - unless current_user.is_observer?
        %td= link_to "Go To Discussion", comment_new_class_room_discussion_path(@class.id, discussion)
      - else
        - if @student
          %td= link_to "Go To Discussion", go_to_student_discussion_class_room_discussion_path(@class.id, discussion, @student.id)
        - elsif @teacher
          %td= link_to "Go To Discussion", go_to_teacher_discussion_class_room_discussion_path(@class.id, discussion, @teacher.id)
%br
- unless current_user.is_observer?
  = link_to "New Discussion", new_class_room_discussion_path(@class.id)