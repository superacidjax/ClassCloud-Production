- content_for :calendar_js_and_css do
  = stylesheet_link_tag "event_calendar"
  = javascript_include_tag "event_calendar"

/- content_for :bottom_content do
- unless current_user.is_observer?
  = raw(event_calendar)
- else
  - if @student
    = raw(event_calendar(@student.id))
  - elsif @teacher
    = raw(event_calendar(@teacher.id, true))
%br
- if current_user.is_teacher?
  = link_to "New event", new_class_room_calendar_path(@class.id)
%br
%br
.main
  .myactivityfeed
    = "#{@class.name}'s activity feed"
  %table
    - @activity_streams.each do |activity_stream|
      - actor = activity_stream.actor_type.constantize.find(activity_stream.actor_id)
      - object = activity_stream.object_type.constantize.find(activity_stream.object_id)
      %tr
        %td
          = "#{date_format(activity_stream.created_at)} #{actor.instance_eval(activity_stream.actor_name_method)}"
          = link_to "#{activity_stream.verb.gsub("_", " ")} #{activity_stream.activity} #{object.instance_eval(activity_stream.object_name_method)}", link_to_feed(@class.id,activity_stream.object_type ,activity_stream.object_id , activity_stream.verb.gsub("_", " "))

